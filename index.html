<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Mickael Bonjour &amp; Jonathan Zaehringer">
  <title>Presentation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="https://revealjs.com/css/reset.css">
  <link rel="stylesheet" href="https://revealjs.com/css/reveal.css">
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style>
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #232629;
    color: #7a7c7d;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #7a7c7d;  padding-left: 4px; }
div.sourceCode
  { color: #cfcfc2; background-color: #232629; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span. { color: #cfcfc2; } /* Normal */
code span.al { color: #95da4c; } /* Alert */
code span.an { color: #3f8058; } /* Annotation */
code span.at { color: #2980b9; } /* Attribute */
code span.bn { color: #f67400; } /* BaseN */
code span.bu { color: #7f8c8d; } /* BuiltIn */
code span.cf { color: #fdbc4b; } /* ControlFlow */
code span.ch { color: #3daee9; } /* Char */
code span.cn { color: #27aeae; } /* Constant */
code span.co { color: #7a7c7d; } /* Comment */
code span.cv { color: #7f8c8d; } /* CommentVar */
code span.do { color: #a43340; } /* Documentation */
code span.dt { color: #2980b9; } /* DataType */
code span.dv { color: #f67400; } /* DecVal */
code span.er { color: #da4453; } /* Error */
code span.ex { color: #0099ff; } /* Extension */
code span.fl { color: #f67400; } /* Float */
code span.fu { color: #8e44ad; } /* Function */
code span.im { color: #27ae60; } /* Import */
code span.in { color: #c45b00; } /* Information */
code span.kw { color: #cfcfc2; } /* Keyword */
code span.op { color: #cfcfc2; } /* Operator */
code span.ot { color: #27ae60; } /* Other */
code span.pp { color: #27ae60; } /* Preprocessor */
code span.re { color: #2980b9; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #da4453; } /* SpecialString */
code span.st { color: #f44f4f; } /* String */
code span.va { color: #27aeae; } /* Variable */
code span.vs { color: #da4453; } /* VerbatimString */
code span.wa { color: #da4453; } /* Warning */
  </style>
  <link rel="stylesheet" href="https://revealjs.com/css/theme/blood.css" id="theme">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'https://revealjs.com/css/print/pdf.css' : 'https://revealjs.com/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="https://revealjs.com/lib/js/html5shiv.js"></script>
  <![endif]-->
  <p><link rel="stylesheet" href="assets/custom.css"></p>
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Presentation</h1>
  <p class="subtitle">Système de messagerie web sécurisé</p>
  <p class="author">Mickael Bonjour &amp; Jonathan Zaehringer</p>
</section>

<section id="sti---projet-2" class="title-slide slide level1"><h1>STI - Projet 2</h1></section>
<section id="table-des-matières" class="title-slide slide level1"><h1>Table des matières</h1><ul>
<li>Introduction</li>
<li>Analyse de Menace</li>
<li>CSRF</li>
<li>Bad crypto</li>
<li>Echecs</li>
<li>Conclusion</li>
</ul></section>
<section id="introduction" class="title-slide slide level1"><h1>Introduction</h1><ul>
<li>frontend SPA en vuejs</li>
<li>backend API RESTful en expressjs</li>
</ul>
<aside class="notes">
<p>Le projet initial a été développer avec un frontend en Single Page App en vuejs et une API RESTful en expressjs.</p>
<p>Nous allons vous présenter les attaques intéressantes que nous avons pu faire sur cette infrastructure.</p>
</aside></section>
<section><section id="analyse-de-menaces" class="title-slide slide level1"><h1>Analyse de Menaces</h1></section><section id="dfd" class="slide level2">
<h2>DFD</h2>
<figure>
<img data-src="assets/img/DFD.png" alt="" /><figcaption>DFD</figcaption>
</figure>
<aside class="notes">
<p>Nous pouvons rapidement voir la frontière de confiance qui se trouve réellement au niveau du backend.</p>
<p>On voit bien que les attaques peuvent être faite directement sur le backend sans passer par le frontend.</p>
</aside>
</section><section id="points-critiques" class="slide level2">
<h2>Points critiques</h2>
<ul>
<li>L’intégrité</li>
<li>La confidentialité</li>
</ul>
<aside class="notes">
<p>Si une faille permet de lire/modifier/envoyer des messages sans être autorisé à accéder à ce compte, cela est extrêmement critique et peut détruire le service.</p>
</aside>
</section></section>
<section><section id="csrf" class="title-slide slide level1"><h1>CSRF</h1></section><section id="prérequis" class="slide level2">
<h2>Prérequis</h2>
<ul>
<li>pas de cross-origin</li>
<li>JSON valide</li>
</ul>
<aside class="notes">
<p>Le frontend est fourni par le backend ce qui permet de ne pas avoir de CORS définis ce qui implique une certaine sécurité.</p>
<p>L’API ne travaille uniquement en JSON ce qui impose donc de pouvoir envoyer du JSON par un formulaire HTML.</p>
</aside>
</section><section id="tentatives-dattaques" class="slide level2">
<h2>Tentatives d’attaques</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">&lt;form</span><span class="ot"> method=</span><span class="st">&quot;POST&quot;</span><span class="ot"> action=</span><span class="st">&quot;http://localhost:3000/message&quot;</span><span class="ot"> enctype=</span><span class="st">&quot;text/plain&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> name=</span><span class="st">&#39;{&quot;to&quot;:1,&quot;subject&quot;:&quot;CRSF &quot;, &quot;message&quot;:&quot;&#39;</span><span class="ot"> value=</span><span class="st">&#39;pwned&quot;}&#39;</span> <span class="kw">/&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">&lt;/form&gt;</span></span></code></pre></div>
<aside class="notes">
<p>Il n’est pas possible d’envoyer du JSON de manière standard. Mais il est possible d’abuser de certaines options.</p>
<p>Ce formulaire permet parfois de profiter de faille de type CSRF, dans notre cas cela n’a pas fonctionner.</p>
</aside>
</section><section id="section" class="slide level2">
<h2></h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">&lt;form</span><span class="ot"> method=</span><span class="st">&quot;POST&quot;</span><span class="ot"> action=</span><span class="st">&quot;http://localhost:3000/message&quot;</span><span class="kw">&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;number&quot;</span><span class="ot"> name=</span><span class="st">&#39;to&#39;</span><span class="ot"> value=</span><span class="st">&#39;1&#39;</span><span class="kw">/&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> name=</span><span class="st">&#39;subject&#39;</span><span class="ot"> value=</span><span class="st">&quot;CRSF PWNED&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> name=</span><span class="st">&#39;message&#39;</span><span class="ot"> value=</span><span class="st">&#39;HAHAH&#39;</span> <span class="kw">/&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="kw">&lt;/form&gt;</span></span></code></pre></div>
<aside class="notes">
<p>Dans notre cas, l’application comportait le parser pour les types, <code>application/x-www-form-urlencoded</code> mais le serveur ne traite uniquement les données en JSON. Cela avait pour conséquence de faire planter la requête ce qui aurait pu permettre d’exporter le parser pour effectuer un CSRF.</p>
<p>L’application n’accepte que le JSON donc il n’est pas nécessaire de l’avoir. nous avons donc désactivé celui-ci pour éviter tout risque.</p>
</aside>
</section></section>
<section><section id="bad-crypto" class="title-slide slide level1"><h1>Bad crypto</h1></section><section id="source-des-problèmes" class="slide level2">
<h2>source des problèmes</h2>
<ul>
<li>IV réutilisé</li>
<li>AES-CBC</li>
<li>IV malléable</li>
</ul>
</section><section id="schéma-cbc" class="slide level2">
<h2>Schéma CBC</h2>
<figure>
<img data-src="./assets/img/cbc-explained.png" alt="" /><figcaption>AES-CBC explained</figcaption>
</figure>
<aside class="notes">
<p>Bien expliquer que CBC est très malléable si l’IV l’est. Comme démontré dans l’illustration, le premier bloc peut être modifié. L’IV réutilisé même sans pouvoir le modifier aurait été une faille, car il y aurait eu Information Disclosure</p>
</aside>
</section></section>
<section id="échec" class="title-slide slide level1"><h1>Échec</h1><ul>
<li>XSS - vuejs sanitize tout input</li>
<li>Injection SQL - Sécurisé par Prepare Statements</li>
</ul>
<aside class="notes">

</aside></section>
<section id="conclusion" class="title-slide slide level1"><h1>Conclusion</h1><ul>
<li>Technologie moderne</li>
</ul>
<aside class="notes">

</aside></section>
<section id="question" class="title-slide slide level1"><h1>Question</h1></section>
    </div>
  </div>

  <script src="https://revealjs.com/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Push each slide change to the browser history
        history: true,
        // Parallax background image
        parallaxBackgroundImage: 'assets/img/background_img.jpg', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"
        // Parallax background size
        parallaxBackgroundSize: '1920px 1080px', // CSS syntax, e.g. "2100px 900px"

        // Optional reveal.js plugins
        dependencies: [
          { src: 'https://revealjs.com/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'https://revealjs.com/plugin/zoom-js/zoom.js', async: true },
          { src: 'https://revealjs.com/plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>
